# =============================================================================
# Evolution of Todo - Environment Configuration Template
# =============================================================================
# CRITICAL SECURITY RULE: Never commit the actual `.env` file to version control
# Copy this file to `.env` and fill in your actual credentials
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# This configuration supports BOTH local development and production deployment

# OPTION A: Local Development (Docker Compose PostgreSQL)
# --------------------------------------------------------
# Use this for local development with docker-compose
POSTGRES_DB=todo_db
POSTGRES_USER=todo_user
POSTGRES_PASSWORD=dev_password_change_me_in_production

# PostgreSQL connection settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Full connection string format (auto-constructed by backend)
# This will be built as: postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# OPTION B: Production (Neon Serverless PostgreSQL)
# --------------------------------------------------
# When deploying to production, replace DATABASE_URL with your Neon connection string
# Example format from Neon dashboard:
# DATABASE_URL=postgresql://username:password@ep-cool-name-123456.us-east-2.aws.neon.tech/neondb?sslmode=require

# Optional: Enable connection pooling for Neon (recommended for serverless)
# DATABASE_URL=postgresql://username:password@ep-cool-name-123456-pooler.us-east-2.aws.neon.tech/neondb?sslmode=require

# -----------------------------------------------------------------------------
# PostgreSQL Performance Tuning (Local Development Only)
# -----------------------------------------------------------------------------
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=128MB

# -----------------------------------------------------------------------------
# Backend Configuration (FastAPI)
# -----------------------------------------------------------------------------
# Application settings
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=info

# API server settings
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# CORS allowed origins (comma-separated for production)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# -----------------------------------------------------------------------------
# Frontend Configuration (Next.js)
# -----------------------------------------------------------------------------
# Public environment variables (exposed to browser)
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_NAME=Evolution of Todo

# -----------------------------------------------------------------------------
# Authentication (Better Auth)
# -----------------------------------------------------------------------------
# JWT secret for token signing (MUST be changed in production)
# Generate with: openssl rand -base64 32
JWT_SECRET=replace_with_secure_random_string_min_32_chars

# JWT expiration time (in seconds)
JWT_EXPIRATION=3600

# Session configuration
SESSION_EXPIRATION=86400

# Better Auth configuration
BETTER_AUTH_SECRET=replace_with_secure_random_string_min_32_chars
BETTER_AUTH_URL=http://localhost:8000/api/auth

# -----------------------------------------------------------------------------
# Optional: Database Management UI (pgAdmin)
# -----------------------------------------------------------------------------
# Uncomment if using pgAdmin service in docker-compose.yml
# PGADMIN_EMAIL=admin@todo.local
# PGADMIN_PASSWORD=secure_admin_password
# PGADMIN_PORT=5050

# -----------------------------------------------------------------------------
# Optional: Observability & Monitoring
# -----------------------------------------------------------------------------
# Application Insights / OpenTelemetry (for Phase IV+)
# OTEL_EXPORTER_ENDPOINT=http://localhost:4318
# OTEL_SERVICE_NAME=todo-backend

# -----------------------------------------------------------------------------
# Development Utilities
# -----------------------------------------------------------------------------
# Enable SQL query logging (development only)
DATABASE_ECHO=false

# Auto-create database tables on startup (development only - use Alembic in prod)
DATABASE_AUTO_CREATE_TABLES=true

# =============================================================================
# Setup Instructions
# =============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Update all passwords and secrets with secure values
# 3. For local dev: Leave DATABASE_URL as-is and run `docker-compose up -d`
# 4. For production: Replace DATABASE_URL with your Neon connection string
# 5. NEVER commit the `.env` file to version control
# =============================================================================
